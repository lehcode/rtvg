<?php
/**
 * Common layout
 * 
 * @author  Antony Repin
 * @package rutvgid
 * @version $Id: layout.phtml,v 1.6 2012-05-20 08:58:19 dev Exp $
 *
 */
$this->headTitle()->setSeparator(' :: ');
$this->headScript()->setAllowArbitraryAttributes(true);
$this->jQuery()->enable() //enable jquery ;
	//->setCdnSsl(true) if need to load from ssl location
	->setVersion('1.7.1') //jQuery version, automatically 1.5 = 1.5.latest
	->setUiVersion('1.8.18') //jQuery UI version, automatically 1.8 = 1.8.latest
	//->addStylesheet('https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css') //add the css
	->uiEnable();
/*
 * Initialize content blocks
 */
$header    = $this->header();
$premieres = $this->premieres();
$fpMenu    = $this->fpMenu();
$footer    = $this->footer();
//$sidebarLeft = $this->sidebarLeft();
$sidebarRight = $this->sidebarRight();
$featuredChannels = $this->featuredChannelsList();
$catList = $this->channelsCategoriesList();

/*
 * XHTML
 */
echo $this->doctype(); ?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
<?php 
$this->headTitle(Xmltv_Config::getSiteTitle());
echo $this->headTitle();
/*
 * metadata
 */
$this->headMeta()
	->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8')
	//->setName('keywords', Xmltv_String::strtolower('телепрограмма,каналы,программа тв,каналы,телеканалы,каналы тв'))
	->setName('description', 'Программа всех каналов телевидения на сегодня и текущую неделю.');
echo $this->headMeta();
echo $this->headTitle();
echo $this->jQuery();
/*
 * javascripts
 */
$this->headScript()->prependFile($this->baseUrl().'/js/jcarousel-7bb2e0a/lib/jquery.jcarousel.min.js')
	->prependFile($this->baseUrl().'/js/bootstrap.min.js')
	->prependFile('http://userapi.com/js/api/openapi.js?49');
echo $this->headScript();
/*
 * css files
 */
$this->headLink()
	->offsetSetStylesheet(1, $this->baseUrl().'/css/bootstrap.css')
	->offsetSetStylesheet(2, $this->baseUrl().'/css/template.css')
	->offsetSetStylesheet(3, $this->baseUrl().'/js/jcarousel-7bb2e0a/skins/tango/skin.css');
echo $this->headLink();
/*
 * add styles
 */
echo $this->headStyle();
?>
</head>
<body>
<div class="container">
	
	<?php if (!$this->is_frontpage): ?>
	<div class="span12" id="header">
		<?php echo $header; ?>
	</div>
	<?php endif; ?>
	
	<div class="span12">
		
		<?php 
		if ($this->is_frontpage) { ?>
		
		<div class="span12" id="maincontent">
			<?php echo $fpMenu; ?>
			<div class="span12" id="premieres">
				<?php echo $premieres; ?>
			</div>
		</div>
		
		<div class="span12">
			<?php echo $featuredChannels; ?>
		</div>
		
		<?php 
		} else { ?>
		
		<?php if (!empty($premieres)): ?>
		<div class="span12" id="premieres">
			<?php echo $premieres; ?>
		</div>
		<?php endif; ?>
		
		<div class="span2" id="col_l">
			<div class="ad160x90" style="margin: 0 auto; width: 160px;">
				<script type="text/javascript"><!--
				google_ad_client = "ca-pub-1744616629400880";
				/* rutvgid 160x90 */
				google_ad_slot = "7070699068";
				google_ad_width = 160;
				google_ad_height = 90;
				//-->
				</script>
				<script type="text/javascript"
				src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
				</script>
			</div>
			<?php echo $catList; ?>
		</div>
		
		<div class="span6" id="maincontent">
			<?php echo $this->layout()->content; ?>
		</div>
		
		<div class="span4" id="col_r">
			<?php echo $sidebarRight; ?>
			<?php 
			if ($this->relevant_videos === true) {
				echo "<h3>Видео онлайн на RuTvGid</h3>";
				echo $this->youtubeVideos( array($this->channel->title), array(
					'start_index'=>2,
					'max_results'=>4,
					'show_duration'=>true,
					'thumb_width'=>120,
					'collapse'=>true,
					'truncate_description'=>30), 'sidebar' );
			}
			?>
		</div>
		
		<?php 
		} ?>
		
	</div>
	<?php echo $footer; ?>
</div>
</body>
</html>