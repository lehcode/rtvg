<?php
/**
 * Common layout
 * 
 * @author  Antony Repin
 * @package rutvgid
 * @version $Id: layout.phtml,v 1.3 2012-04-01 04:56:26 dev Exp $
 *
 */
$this->headScript()->setAllowArbitraryAttributes(true);
$this->jQuery()->enable() //enable jquery ;
	//->setCdnSsl(true) if need to load from ssl location
	->setVersion('1.7.1') //jQuery version, automatically 1.5 = 1.5.latest
	->setUiVersion('1.8.18') //jQuery UI version, automatically 1.8 = 1.8.latest
	//->addStylesheet('https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css') //add the css
	->uiEnable();
/*
 * Initialize content blocks
 */
$page_parts = array(
	'premieres',
	'header',
	'sidebar_Left',
	'sidebar_Right',
	'footer'
);
foreach ($page_parts as $class) {
	$block_class = 'Xmltv_Block_'.Xmltv_String::ucfirst($class);
	$$class = new $block_class();
}
/*
 * XHTML
 */
echo $this->doctype(); ?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
<?php 
/*
 * metadata
 */
$this->headMeta()
	->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8')
	->appendName('keywords', Xmltv_String::strtolower('телепрограмма,каналы,программа тв,каналы,телеканалы,каналы тв'))
	->appendName('description', 'Программа всех каналов телевидения на сегодня и текущую неделю.');
echo $this->headMeta();
echo $this->headTitle();
echo $this->jQuery();
/*
 * javascripts
 */
$this->headScript()->prependFile($this->baseUrl().'/js/jcarousel-7bb2e0a/lib/jquery.jcarousel.min.js')
	->prependFile($this->baseUrl().'/js/bootstrap.min.js')
	->prependFile('http://userapi.com/js/api/openapi.js?49');

foreach ($page_parts as $class) {
	$block_class = 'Xmltv_Block_'.Xmltv_String::ucfirst($class);
	$$class    = new $block_class();
	if ($js=$$class->getJs())
	$this->headScript()->appendScript($js);
}
echo $this->headScript();
/*
 * css files
 */
$this->headLink()
	->offsetSetStylesheet(1, $this->baseUrl().'/css/bootstrap.css')
	->offsetSetStylesheet(2, $this->baseUrl().'/css/template.css')
	->offsetSetStylesheet(3, $this->baseUrl().'/js/jcarousel-7bb2e0a/skins/tango/skin.css');
echo $this->headLink();
/*
 * add styles
 */
foreach ($page_parts as $class) {
	$block_class = 'Xmltv_Block_'.Xmltv_String::ucfirst($class);
	$$class    = new $block_class();
	if ($css=$$class->getCss())
	$this->headStyle()->appendStyle($css);
}
echo $this->headStyle();


?>
</head>
<body>
<div class="container">
	<?php echo $header->getHtml(); ?>
	<div class="span12">
		<div class="span12" id="premieres">
			<?php echo $premieres->getHtml(); ?>
		</div>
		<div class="span2" id="col_l">
			<?php echo $sidebar_Left->getHtml(); ?>
		</div>
		<div class="span6" id="maincontent">
			<?php echo $this->layout()->content; ?>
		</div>
		<div class="span4" id="col_r">
			<?php echo $sidebar_Right->getHtml(); ?>
		</div>
	</div>
	<?php echo $footer->getHtml(); ?>
</div>
</body>
</html>